<!DOCTYPE html>
<html>
  <head>
    <script src="../jspsych.js"></script>
    <script src="../plugins/jspsych-html-keyboard-response.js"></script>
    <script src="../plugins/jspsych-image-button-response.js"></script>
    <link rel="stylesheet" href="../css/jspsych.css"></link>
    <style>
      img { width: 300px; }
    </style>
  </head>
  <body></body>
  <script>

  var timeline = [];
      
  var welcome_block = {
      type: "html-keyboard-response",
      stimulus: "Welcome to the experiment. Press any key to begin."
    };
  timeline.push(welcome_block);
      
  var test_stimuli_telstatic = [
      { stimulus: "img/1starfish.png", data: { test_part: 'test', correct_response: '7' } },
      { stimulus: "img/1electric_guitar.png", data: { test_part: 'test', correct_response: '2' } },
      { stimulus: "img/1king_penguin.png", data: { test_part: 'test', correct_response: '4' } },
      { stimulus: "img/1peacock_cppn.png", data: { test_part: 'test', correct_response: '5' } },
      { stimulus: "img/1freight_car.png", data: { test_part: 'test', correct_response: '3' } },
      { stimulus: "img/1baseball.png", data: { test_part: 'test', correct_response: '1' } },
      { stimulus: "img/1african_grey.png", data: { test_part: 'test', correct_response: '0' } },
      { stimulus: "img/1remote_control.png", data: { test_part: 'test', correct_response: '6' } }
  ];
      
  var test_stimuli_digits_ground_truth = [
{ stimulus: "img/0-0.png", data: { test_part: 'test', correct_response: '0' } },
      { stimulus: "img/0-1.png", data: { test_part: 'test', correct_response: '0' } },
      { stimulus: "img/0-2.png", data: { test_part: 'test', correct_response: '0' } },
      { stimulus: "img/0-3.png", data: { test_part: 'test', correct_response: '0' } },
      { stimulus: "img/0-4.png", data: { test_part: 'test', correct_response: '0' } },
      { stimulus: "img/0-5.png", data: { test_part: 'test', correct_response: '0' } },
      { stimulus: "img/0-6.png", data: { test_part: 'test', correct_response: '0' } },
      { stimulus: "img/0-7.png", data: { test_part: 'test', correct_response: '0' } },
      { stimulus: "img/0-8.png", data: { test_part: 'test', correct_response: '0' } },
      { stimulus: "img/0-9.png", data: { test_part: 'test', correct_response: '0' } },
{ stimulus: "img/1-0.png", data: { test_part: 'test', correct_response: '1' } },
      { stimulus: "img/1-1.png", data: { test_part: 'test', correct_response: '1' } },
      { stimulus: "img/1-2.png", data: { test_part: 'test', correct_response: '1' } },
      { stimulus: "img/1-3.png", data: { test_part: 'test', correct_response: '1' } },
      { stimulus: "img/1-4.png", data: { test_part: 'test', correct_response: '1' } },
      { stimulus: "img/1-5.png", data: { test_part: 'test', correct_response: '1' } },
      { stimulus: "img/1-6.png", data: { test_part: 'test', correct_response: '1' } },
      { stimulus: "img/1-7.png", data: { test_part: 'test', correct_response: '1' } },
      { stimulus: "img/1-8.png", data: { test_part: 'test', correct_response: '1' } },
      { stimulus: "img/1-9.png", data: { test_part: 'test', correct_response: '1' } },
{ stimulus: "img/2-0.png", data: { test_part: 'test', correct_response: '2' } },
      { stimulus: "img/2-1.png", data: { test_part: 'test', correct_response: '2' } },
      { stimulus: "img/2-2.png", data: { test_part: 'test', correct_response: '2' } },
      { stimulus: "img/2-3.png", data: { test_part: 'test', correct_response: '2' } },
      { stimulus: "img/2-4.png", data: { test_part: 'test', correct_response: '2' } },
      { stimulus: "img/2-5.png", data: { test_part: 'test', correct_response: '2' } },
      { stimulus: "img/2-6.png", data: { test_part: 'test', correct_response: '2' } },
      { stimulus: "img/2-7.png", data: { test_part: 'test', correct_response: '2' } },
      { stimulus: "img/2-8.png", data: { test_part: 'test', correct_response: '2' } },
      { stimulus: "img/2-9.png", data: { test_part: 'test', correct_response: '2' } },
{ stimulus: "img/3-0.png", data: { test_part: 'test', correct_response: '3' } },
      { stimulus: "img/3-1.png", data: { test_part: 'test', correct_response: '3' } },
      { stimulus: "img/3-2.png", data: { test_part: 'test', correct_response: '3' } },
      { stimulus: "img/3-3.png", data: { test_part: 'test', correct_response: '3' } },
      { stimulus: "img/3-4.png", data: { test_part: 'test', correct_response: '3' } },
      { stimulus: "img/3-5.png", data: { test_part: 'test', correct_response: '3' } },
      { stimulus: "img/3-6.png", data: { test_part: 'test', correct_response: '3' } },
      { stimulus: "img/3-7.png", data: { test_part: 'test', correct_response: '3' } },
      { stimulus: "img/3-8.png", data: { test_part: 'test', correct_response: '3' } },
      { stimulus: "img/3-9.png", data: { test_part: 'test', correct_response: '3' } },
{ stimulus: "img/4-0.png", data: { test_part: 'test', correct_response: '4' } },
      { stimulus: "img/4-1.png", data: { test_part: 'test', correct_response: '4' } },
      { stimulus: "img/4-2.png", data: { test_part: 'test', correct_response: '4' } },
      { stimulus: "img/4-3.png", data: { test_part: 'test', correct_response: '4' } },
      { stimulus: "img/4-4.png", data: { test_part: 'test', correct_response: '4' } },
      { stimulus: "img/4-5.png", data: { test_part: 'test', correct_response: '4' } },
      { stimulus: "img/4-6.png", data: { test_part: 'test', correct_response: '4' } },
      { stimulus: "img/4-7.png", data: { test_part: 'test', correct_response: '4' } },
      { stimulus: "img/4-8.png", data: { test_part: 'test', correct_response: '4' } },
      { stimulus: "img/4-9.png", data: { test_part: 'test', correct_response: '4' } },
{ stimulus: "img/5-0.png", data: { test_part: 'test', correct_response: '5' } },
      { stimulus: "img/5-1.png", data: { test_part: 'test', correct_response: '5' } },
      { stimulus: "img/5-2.png", data: { test_part: 'test', correct_response: '5' } },
      { stimulus: "img/5-3.png", data: { test_part: 'test', correct_response: '5' } },
      { stimulus: "img/5-4.png", data: { test_part: 'test', correct_response: '5' } },
      { stimulus: "img/5-5.png", data: { test_part: 'test', correct_response: '5' } },
      { stimulus: "img/5-6.png", data: { test_part: 'test', correct_response: '5' } },
      { stimulus: "img/5-7.png", data: { test_part: 'test', correct_response: '5' } },
      { stimulus: "img/5-8.png", data: { test_part: 'test', correct_response: '5' } },
      { stimulus: "img/5-9.png", data: { test_part: 'test', correct_response: '5' } },
{ stimulus: "img/6-0.png", data: { test_part: 'test', correct_response: '6' } },
      { stimulus: "img/6-1.png", data: { test_part: 'test', correct_response: '6' } },
      { stimulus: "img/6-2.png", data: { test_part: 'test', correct_response: '6' } },
      { stimulus: "img/6-3.png", data: { test_part: 'test', correct_response: '6' } },
      { stimulus: "img/6-4.png", data: { test_part: 'test', correct_response: '6' } },
      { stimulus: "img/6-5.png", data: { test_part: 'test', correct_response: '6' } },
      { stimulus: "img/6-6.png", data: { test_part: 'test', correct_response: '6' } },
      { stimulus: "img/6-7.png", data: { test_part: 'test', correct_response: '6' } },
      { stimulus: "img/6-8.png", data: { test_part: 'test', correct_response: '6' } },
      { stimulus: "img/6-9.png", data: { test_part: 'test', correct_response: '6' } },
{ stimulus: "img/7-0.png", data: { test_part: 'test', correct_response: '7' } },
      { stimulus: "img/7-1.png", data: { test_part: 'test', correct_response: '7' } },
      { stimulus: "img/7-2.png", data: { test_part: 'test', correct_response: '7' } },
      { stimulus: "img/7-3.png", data: { test_part: 'test', correct_response: '7' } },
      { stimulus: "img/7-4.png", data: { test_part: 'test', correct_response: '7' } },
      { stimulus: "img/7-5.png", data: { test_part: 'test', correct_response: '7' } },
      { stimulus: "img/7-6.png", data: { test_part: 'test', correct_response: '7' } },
      { stimulus: "img/7-7.png", data: { test_part: 'test', correct_response: '7' } },
      { stimulus: "img/7-8.png", data: { test_part: 'test', correct_response: '7' } },
      { stimulus: "img/7-9.png", data: { test_part: 'test', correct_response: '7' } },
{ stimulus: "img/8-0.png", data: { test_part: 'test', correct_response: '8' } },
      { stimulus: "img/8-1.png", data: { test_part: 'test', correct_response: '8' } },
      { stimulus: "img/8-2.png", data: { test_part: 'test', correct_response: '8' } },
      { stimulus: "img/8-3.png", data: { test_part: 'test', correct_response: '8' } },
      { stimulus: "img/8-4.png", data: { test_part: 'test', correct_response: '8' } },
      { stimulus: "img/8-5.png", data: { test_part: 'test', correct_response: '8' } },
      { stimulus: "img/8-6.png", data: { test_part: 'test', correct_response: '8' } },
      { stimulus: "img/8-7.png", data: { test_part: 'test', correct_response: '8' } },
      { stimulus: "img/8-8.png", data: { test_part: 'test', correct_response: '8' } },
      { stimulus: "img/8-9.png", data: { test_part: 'test', correct_response: '8' } },
{ stimulus: "img/9-0.png", data: { test_part: 'test', correct_response: '9' } },
      { stimulus: "img/9-1.png", data: { test_part: 'test', correct_response: '9' } },
      { stimulus: "img/9-2.png", data: { test_part: 'test', correct_response: '9' } },
      { stimulus: "img/9-3.png", data: { test_part: 'test', correct_response: '9' } },
      { stimulus: "img/9-4.png", data: { test_part: 'test', correct_response: '9' } },
      { stimulus: "img/9-5.png", data: { test_part: 'test', correct_response: '9' } },
      { stimulus: "img/9-6.png", data: { test_part: 'test', correct_response: '9' } },
      { stimulus: "img/9-7.png", data: { test_part: 'test', correct_response: '9' } },
      { stimulus: "img/9-8.png", data: { test_part: 'test', correct_response: '9' } },
      { stimulus: "img/9-9.png", data: { test_part: 'test', correct_response: '9' } }
  ];
      
      
  var test_stimuli_digits_adversarial = [
{ stimulus: "img/0-0.png", data: { test_part: 'test', correct_response: '0' } },
      { stimulus: "img/0-1.png", data: { test_part: 'test', correct_response: '1' } },
      { stimulus: "img/0-2.png", data: { test_part: 'test', correct_response: '2' } },
      { stimulus: "img/0-3.png", data: { test_part: 'test', correct_response: '3' } },
      { stimulus: "img/0-4.png", data: { test_part: 'test', correct_response: '4' } },
      { stimulus: "img/0-5.png", data: { test_part: 'test', correct_response: '5' } },
      { stimulus: "img/0-6.png", data: { test_part: 'test', correct_response: '6' } },
      { stimulus: "img/0-7.png", data: { test_part: 'test', correct_response: '7' } },
      { stimulus: "img/0-8.png", data: { test_part: 'test', correct_response: '8' } },
      { stimulus: "img/0-9.png", data: { test_part: 'test', correct_response: '9' } },
{ stimulus: "img/1-0.png", data: { test_part: 'test', correct_response: '0' } },
      { stimulus: "img/1-1.png", data: { test_part: 'test', correct_response: '1' } },
      { stimulus: "img/1-2.png", data: { test_part: 'test', correct_response: '2' } },
      { stimulus: "img/1-3.png", data: { test_part: 'test', correct_response: '3' } },
      { stimulus: "img/1-4.png", data: { test_part: 'test', correct_response: '4' } },
      { stimulus: "img/1-5.png", data: { test_part: 'test', correct_response: '5' } },
      { stimulus: "img/1-6.png", data: { test_part: 'test', correct_response: '6' } },
      { stimulus: "img/1-7.png", data: { test_part: 'test', correct_response: '7' } },
      { stimulus: "img/1-8.png", data: { test_part: 'test', correct_response: '8' } },
      { stimulus: "img/1-9.png", data: { test_part: 'test', correct_response: '9' } },
{ stimulus: "img/2-0.png", data: { test_part: 'test', correct_response: '0' } },
      { stimulus: "img/2-1.png", data: { test_part: 'test', correct_response: '1' } },
      { stimulus: "img/2-2.png", data: { test_part: 'test', correct_response: '2' } },
      { stimulus: "img/2-3.png", data: { test_part: 'test', correct_response: '3' } },
      { stimulus: "img/2-4.png", data: { test_part: 'test', correct_response: '4' } },
      { stimulus: "img/2-5.png", data: { test_part: 'test', correct_response: '5' } },
      { stimulus: "img/2-6.png", data: { test_part: 'test', correct_response: '6' } },
      { stimulus: "img/2-7.png", data: { test_part: 'test', correct_response: '7' } },
      { stimulus: "img/2-8.png", data: { test_part: 'test', correct_response: '8' } },
      { stimulus: "img/2-9.png", data: { test_part: 'test', correct_response: '9' } },
{ stimulus: "img/3-0.png", data: { test_part: 'test', correct_response: '0' } },
      { stimulus: "img/3-1.png", data: { test_part: 'test', correct_response: '1' } },
      { stimulus: "img/3-2.png", data: { test_part: 'test', correct_response: '2' } },
      { stimulus: "img/3-3.png", data: { test_part: 'test', correct_response: '3' } },
      { stimulus: "img/3-4.png", data: { test_part: 'test', correct_response: '4' } },
      { stimulus: "img/3-5.png", data: { test_part: 'test', correct_response: '5' } },
      { stimulus: "img/3-6.png", data: { test_part: 'test', correct_response: '6' } },
      { stimulus: "img/3-7.png", data: { test_part: 'test', correct_response: '7' } },
      { stimulus: "img/3-8.png", data: { test_part: 'test', correct_response: '8' } },
      { stimulus: "img/3-9.png", data: { test_part: 'test', correct_response: '9' } },
{ stimulus: "img/4-0.png", data: { test_part: 'test', correct_response: '0' } },
      { stimulus: "img/4-1.png", data: { test_part: 'test', correct_response: '1' } },
      { stimulus: "img/4-2.png", data: { test_part: 'test', correct_response: '2' } },
      { stimulus: "img/4-3.png", data: { test_part: 'test', correct_response: '3' } },
      { stimulus: "img/4-4.png", data: { test_part: 'test', correct_response: '4' } },
      { stimulus: "img/4-5.png", data: { test_part: 'test', correct_response: '5' } },
      { stimulus: "img/4-6.png", data: { test_part: 'test', correct_response: '6' } },
      { stimulus: "img/4-7.png", data: { test_part: 'test', correct_response: '7' } },
      { stimulus: "img/4-8.png", data: { test_part: 'test', correct_response: '8' } },
      { stimulus: "img/4-9.png", data: { test_part: 'test', correct_response: '9' } },
{ stimulus: "img/5-0.png", data: { test_part: 'test', correct_response: '0' } },
      { stimulus: "img/5-1.png", data: { test_part: 'test', correct_response: '1' } },
      { stimulus: "img/5-2.png", data: { test_part: 'test', correct_response: '2' } },
      { stimulus: "img/5-3.png", data: { test_part: 'test', correct_response: '3' } },
      { stimulus: "img/5-4.png", data: { test_part: 'test', correct_response: '4' } },
      { stimulus: "img/5-5.png", data: { test_part: 'test', correct_response: '5' } },
      { stimulus: "img/5-6.png", data: { test_part: 'test', correct_response: '6' } },
      { stimulus: "img/5-7.png", data: { test_part: 'test', correct_response: '7' } },
      { stimulus: "img/5-8.png", data: { test_part: 'test', correct_response: '8' } },
      { stimulus: "img/5-9.png", data: { test_part: 'test', correct_response: '9' } },
{ stimulus: "img/6-0.png", data: { test_part: 'test', correct_response: '0' } },
      { stimulus: "img/6-1.png", data: { test_part: 'test', correct_response: '1' } },
      { stimulus: "img/6-2.png", data: { test_part: 'test', correct_response: '2' } },
      { stimulus: "img/6-3.png", data: { test_part: 'test', correct_response: '3' } },
      { stimulus: "img/6-4.png", data: { test_part: 'test', correct_response: '4' } },
      { stimulus: "img/6-5.png", data: { test_part: 'test', correct_response: '5' } },
      { stimulus: "img/6-6.png", data: { test_part: 'test', correct_response: '6' } },
      { stimulus: "img/6-7.png", data: { test_part: 'test', correct_response: '7' } },
      { stimulus: "img/6-8.png", data: { test_part: 'test', correct_response: '8' } },
      { stimulus: "img/6-9.png", data: { test_part: 'test', correct_response: '9' } },
{ stimulus: "img/7-0.png", data: { test_part: 'test', correct_response: '0' } },
      { stimulus: "img/7-1.png", data: { test_part: 'test', correct_response: '1' } },
      { stimulus: "img/7-2.png", data: { test_part: 'test', correct_response: '2' } },
      { stimulus: "img/7-3.png", data: { test_part: 'test', correct_response: '3' } },
      { stimulus: "img/7-4.png", data: { test_part: 'test', correct_response: '4' } },
      { stimulus: "img/7-5.png", data: { test_part: 'test', correct_response: '5' } },
      { stimulus: "img/7-6.png", data: { test_part: 'test', correct_response: '6' } },
      { stimulus: "img/7-7.png", data: { test_part: 'test', correct_response: '7' } },
      { stimulus: "img/7-8.png", data: { test_part: 'test', correct_response: '8' } },
      { stimulus: "img/7-9.png", data: { test_part: 'test', correct_response: '9' } },
{ stimulus: "img/8-0.png", data: { test_part: 'test', correct_response: '0' } },
      { stimulus: "img/8-1.png", data: { test_part: 'test', correct_response: '1' } },
      { stimulus: "img/8-2.png", data: { test_part: 'test', correct_response: '2' } },
      { stimulus: "img/8-3.png", data: { test_part: 'test', correct_response: '3' } },
      { stimulus: "img/8-4.png", data: { test_part: 'test', correct_response: '4' } },
      { stimulus: "img/8-5.png", data: { test_part: 'test', correct_response: '5' } },
      { stimulus: "img/8-6.png", data: { test_part: 'test', correct_response: '6' } },
      { stimulus: "img/8-7.png", data: { test_part: 'test', correct_response: '7' } },
      { stimulus: "img/8-8.png", data: { test_part: 'test', correct_response: '8' } },
      { stimulus: "img/8-9.png", data: { test_part: 'test', correct_response: '9' } },
{ stimulus: "img/9-0.png", data: { test_part: 'test', correct_response: '0' } },
      { stimulus: "img/9-1.png", data: { test_part: 'test', correct_response: '1' } },
      { stimulus: "img/9-2.png", data: { test_part: 'test', correct_response: '2' } },
      { stimulus: "img/9-3.png", data: { test_part: 'test', correct_response: '3' } },
      { stimulus: "img/9-4.png", data: { test_part: 'test', correct_response: '4' } },
      { stimulus: "img/9-5.png", data: { test_part: 'test', correct_response: '5' } },
      { stimulus: "img/9-6.png", data: { test_part: 'test', correct_response: '6' } },
      { stimulus: "img/9-7.png", data: { test_part: 'test', correct_response: '7' } },
      { stimulus: "img/9-8.png", data: { test_part: 'test', correct_response: '8' } },
      { stimulus: "img/9-9.png", data: { test_part: 'test', correct_response: '9' } },
  ];
    

  var test_tel = {
      type: 'image-button-response',
      stimulus: jsPsych.timelineVariable('stimulus'),
      choices: ['African Grey', 'Baseball', 'Electric Guitar', 'Freight Car', 'King Penguin', 'Peacock', 'Remote Control', 'Starfish'],
      data: jsPsych.timelineVariable('data'),
      on_finish: function(data){
        data.correct = data.key_press == data.correct_response;
    },
  }
  
  var test_digit_ground_truth = {
      type: 'image-button-response',
      stimulus: jsPsych.timelineVariable('stimulus'),
      choices: ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9'],
      data: jsPsych.timelineVariable('data'),
      prompt: "<p>What is this?</p>",
      on_finish: function(data){
        data.correct = data.key_press == data.correct_response;
    },
  }
  
  var test_digit_adversarial = {
      type: 'image-button-response',
      stimulus: jsPsych.timelineVariable('stimulus'),
      choices: ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9'],
      data: jsPsych.timelineVariable('data'),
      prompt: "<p>The machine made a false prediction. Can you guess what the machine predicted?</p>",
      on_finish: function(data){
        data.correct = data.key_press == data.correct_response;
    },
  }
    
  var tel_block = {
      type: "html-keyboard-response",
      stimulus: "<p>In this experiment, a television static image will appear in the center " +
          "of the screen. Select the label that you think the image matches best.</p>"
    };
  timeline.push(tel_block);
      
  var test_procedure1 = {
      timeline: [test_tel],
      timeline_variables: test_stimuli_telstatic,
      repetitions: 1,
      randomize_order: true
  }
  timeline.push(test_procedure1);
      
  var ground_truth_block = {
      type: "html-keyboard-response",
      stimulus: "In this experiment, pictures of digits will appear in the center. Some of them are disturbed by pixel noise. Can you correctly tell which digit each image actually is? "
    };
  timeline.push(ground_truth_block);
    
  var test_procedure2 = {
      timeline: [test_digit_ground_truth],
      timeline_variables: test_stimuli_digits_ground_truth,
      repetitions: 1,
      randomize_order: true
  }
  timeline.push(test_procedure2);
      
  var adversarial_block = {
      type: "html-keyboard-response",
      stimulus: "For the images of digits in this experiment, the machine made false predictions of the actual digit in each image. Can you guess what the machine predicted?"
    };
  timeline.push(adversarial_block);
  
  var test_procedure3 = {
      timeline: [test_digit_adversarial],
      timeline_variables: test_stimuli_digits_adversarial,
      repetitions: 1,
      randomize_order: true
  }
  timeline.push(test_procedure3);

  var debrief_block = {
      type: "html-keyboard-response",
      stimulus: function() {
        return "<p>Press any key to complete the experiment. Thank you!</p>";
    }
  };
  timeline.push(debrief_block)
      
  jsPsych.init({
    timeline: timeline,
    show_progress_bar: true,
    on_finish: function(){
        jsPsych.data.displayData();
        jsPsych.data.get().localSave('csv','mydata.csv');
    }
  });

  </script>
</html>
